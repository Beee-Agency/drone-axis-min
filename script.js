window.Webflow=window.Webflow||[],window.Webflow.push(function(){document.querySelectorAll('[data-faq-dropdown=""]').forEach(t=>{t.addEventListener("click",function(){let t=this.querySelector('[data-faq-dropdown="answer"]'),e=this.querySelector('[data-faq-dropdown="arrow"]');t&&(t.style.height&&"0px"!==t.style.height?(t.style.height="0px",e&&(e.style.transform="rotate(0deg)")):(t.style.height=t.scrollHeight+"px",e&&(e.style.transform="rotate(180deg)")))})})}),document.querySelectorAll("input, textarea, select").forEach(t=>{t.addEventListener("focus",function(){if(window.innerWidth<992){let t=getComputedStyle(this).fontSize;this.dataset.originalSize=t,this.style.fontSize="16px",setTimeout(()=>{this.style.fontSize=t})}})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.getElementById("date-picker");t&&(t.setAttribute("autocomplete","off"),t.setAttribute("readonly","readonly"),t.value=""),flatpickr("#date-picker",{enableTime:!0,time_24hr:!0,locale:"fr",minDate:"today",disableMobile:!0,altInput:!0,altFormat:"d/m/Y - H\\hi",dateFormat:"Y-m-d H:i",allowInput:!1,clickOpens:!0})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){new class t{constructor(t){if(this.formWrapper=$(t),!this.formWrapper.length)return;this.form=this.formWrapper.find("form").length?this.formWrapper.find("form").eq(0):this.formWrapper,this.hasSubmitted=!1,this.validator=new class t{constructor(){this.borderError="1px solid #ff0000",this.shadowError="0 0 0 2px rgba(255, 0, 0, 0.1)",this.borderSuccess="1px solid #008000",this.shadowSuccess="0 0 0 2px rgba(0, 128, 0, 0.1)"}getIcon(t,e){let a=$(t),r=a.closest('.price_form-input-wrapper, .price_form-input-wrap, [data-contact-field="radio-wrapper"]');if(r.length>0)return r.find(`[data-contact-field="${e}"]`);{let i=a.siblings(`[data-contact-field="${e}"]`);return i.length?i:a.parent().find(`[data-contact-field="${e}"]`)}}getVisibleDateElement(t){let e=$(t).closest(".price_form-input-wrap");return e.length&&e.find('input[type="text"].is-date').get(0)||t}cleanError(t){let e=window.getComputedStyle(t).borderColor;("rgb(255, 0, 0)"===e||"#ff0000"===e)&&(t.style.setProperty("border","","important"),t.style.setProperty("box-shadow","","important"),t.style.borderRadius="",this.getIcon(t,"error").hide())}applySuccessBorder(t){t.style.setProperty("border",this.borderSuccess,"important")}applySuccessShadow(t){t.style.setProperty("box-shadow",this.shadowSuccess,"important")}removeShadow(t){t.style.setProperty("box-shadow","","important")}showSuccess(t,e){$(t).is('[data-contact-field="date"]')&&(t=this.getVisibleDateElement(t)),this.cleanError(t),this.applySuccessBorder(t),t.style.borderRadius="",this.getIcon(t,"validate").show(),e?this.applySuccessShadow(t):this.removeShadow(t)}hideSuccess(t){$(t).is('[data-contact-field="date"]')&&(t=this.getVisibleDateElement(t)),t.style.setProperty("border","","important"),this.removeShadow(t),this.getIcon(t,"validate").hide()}showError(t){$(t).is('[data-contact-field="date"]')&&(t=this.getVisibleDateElement(t)),this.hideSuccess(t),t.style.setProperty("border",this.borderError,"important"),t.style.setProperty("box-shadow",this.shadowError,"important"),t.style.borderRadius="",this.getIcon(t,"error").show()}showRadioError(t){this.hideSuccess(t),t.style.setProperty("border",this.borderError,"important"),t.style.setProperty("box-shadow",this.shadowError,"important"),this.getIcon(t,"error").show()}},this.popup=new class t{constructor(){this.popup=null,this.bar=null,this.injectPopupHTML()}isInViewport(){if(!this.popup)return!1;let t=this.popup.getBoundingClientRect(),e=window.innerWidth||document.documentElement.clientWidth,a=window.innerHeight||document.documentElement.clientHeight;return t.right>0&&t.left<e&&t.bottom>0&&t.top<a}forceHide(){this.popup&&this.bar&&(this.popup.classList.remove("show"),this.popup.classList.add("hide"),this.bar.style.width="0%")}injectPopupHTML(){let t=document.createElement("style");t.textContent=`
        #contact-popup { position: fixed; top: 24px; right: 24px; z-index: 9999; opacity: 0; transform: translateX(400px); transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); }
        #contact-popup.show { opacity: 1; transform: translateX(0); }
        #contact-popup.hide { opacity: 0; transform: translateX(400px); transition: opacity 0.4s cubic-bezier(0.4, 0, 1, 1), transform 0.4s cubic-bezier(0.4, 0, 1, 1); }
        #contact-popup-inner { background: #ffffff; padding: 16px 20px; border-radius: 12px; min-width: 320px; max-width: 400px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08); border: 1px solid rgba(0, 128, 0, 0.2); font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; }
        #contact-popup-header { display: flex; align-items: center; gap: 12px; margin-bottom: 8px; }
        #contact-popup-icon { width: 24px; height: 24px; background: #22c55e; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; animation: scaleIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s both; }
        @keyframes scaleIn { from { transform: scale(0); } to { transform: scale(1); } }
        #contact-popup-icon svg { width: 14px; height: 14px; fill: white; }
        #contact-popup-title { font-size: 15px; font-weight: 600; color: #1a1a1a; margin: 0; }
        #contact-popup-text { font-size: 13px; color: #6b7280; margin: 0 0 12px 0; line-height: 1.5; }
        #contact-popup-track { width: 100%; height: 4px; border-radius: 999px; background: #f3f4f6; overflow: hidden; }
        #contact-popup-bar { width: 0%; height: 100%; background: linear-gradient(90deg, #22c55e, #16a34a); transition: width 5s cubic-bezier(0.4, 0, 0.2, 1); border-radius: 999px; }
        @media (max-width: 768px) { #contact-popup { top: 16px; right: 16px; left: 16px; } #contact-popup-inner { min-width: auto; width: 100%; } }
      `,document.head.appendChild(t);let e=document.createElement("div");e.id="contact-popup",e.innerHTML=`<div id="contact-popup-inner"><div id="contact-popup-header"><div id="contact-popup-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg></div><div id="contact-popup-title">Demande envoy\xe9e avec succ\xe8s</div></div><div id="contact-popup-text">Nous vous recontacterons dans les plus brefs d\xe9lais.</div><div id="contact-popup-track"><div id="contact-popup-bar"></div></div></div>`,document.body.appendChild(e),this.popup=document.getElementById("contact-popup"),this.bar=document.getElementById("contact-popup-bar")}show(){this.popup&&this.bar&&(this.bar.style.width="0%",this.popup.classList.remove("hide"),this.popup.classList.add("show"),requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.bar.style.width="100%"})}),setTimeout(()=>{if(!this.isInViewport()){this.forceHide();return}this.popup.classList.remove("show"),this.popup.classList.add("hide"),setTimeout(()=>{this.popup.classList.remove("hide"),this.bar.style.width="0%"},500)},5e3))}},this.phoneIntl=new class t{constructor(){this.iti=null,this.input=null,this.isFormatting=!1,this.countryConfigs={fr:{placeholder:"07 12 34 56 78",regex:/^0[1-9](?:\s\d{2}){4}$/,maxLength:14,formatPattern:[2,2,2,2,2],description:"Format : 0X XX XX XX XX"},be:{placeholder:"04 76 64 64 64",regex:/^0[1-9](?:\s\d{2}){4}$/,maxLength:14,formatPattern:[2,2,2,2,2],description:"Format : 0X XX XX XX XX"},ch:{placeholder:"075 555 55 55",regex:/^0\d{2}\s\d{3}\s\d{2}\s\d{2}$/,maxLength:13,formatPattern:[3,3,2,2],description:"Format : 0XX XXX XX XX"},de:{placeholder:"0171 123 4567",regex:/^0\d{3,4}\s\d{3}\s\d{4}$/,maxLength:14,formatPattern:[4,3,4],description:"Format : 0XXX XXX XXXX"}},this.init()}init(){this.input=document.querySelector('input[data-contact-field="phone"]'),this.input&&window.intlTelInput&&(this.iti=window.intlTelInput(this.input,{utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js",initialCountry:"fr",preferredCountries:["fr"],onlyCountries:["fr","be","ch","de"],nationalMode:!0,formatOnDisplay:!0,separateDialCode:!1}),this.setupEventListeners(),setTimeout(()=>this.updateInputConfig(),200))}formatPhoneNumber(t,e){let a=t.replace(/\s/g,""),r=e.formatPattern.reduce((t,e)=>t+e,0),i=a.substring(0,r),o="",n=0;for(let s=0;s<e.formatPattern.length;s++){let l=e.formatPattern[s],c=i.substring(n,n+l);if(c.length>0){o+=c;let d=i.substring(n+l);s<e.formatPattern.length-1&&c.length===l&&d.length>0&&(o+=" ")}n+=l}return o}updateInputConfig(){let t=this.iti.getSelectedCountryData(),e=t&&t.iso2?t.iso2:"fr",a=this.countryConfigs[e]||this.countryConfigs.fr;this.input.placeholder=a.placeholder,this.input.setAttribute("data-phone",e),this.input.setAttribute("maxlength",a.maxLength)}setupEventListeners(){this.input.addEventListener("countrychange",()=>{this.input.value="",this.input.setCustomValidity(""),this.updateInputConfig(),this.input.dispatchEvent(new CustomEvent("phone:validation",{bubbles:!0}))}),this.input.addEventListener("input",t=>{if(this.isFormatting)return;this.isFormatting=!0;let e=this.iti.getSelectedCountryData(),a=e&&e.iso2?e.iso2:"fr",r=this.countryConfigs[a]||this.countryConfigs.fr,i=this.input.value,o=this.input.selectionStart,n=i.replace(/[^\d\s]/g,""),s=n.replace(/\s/g,"");s.length>0&&/^[1-9]/.test(s)&&"ch"!==a&&(n="0"+s),"ch"===a&&s.length>0&&/^[78]/.test(s)&&(n="0"+s);let l=this.formatPhoneNumber(n,r);if(l!==i){let c=i.length,d=l.length;this.input.value=l;let p=o;p=Math.max(0,Math.min(p=d>c&&" "===l[o]?o+1:d<c&&o>0&&" "===i[o-1]?o-1:o+(d-c),l.length)),this.input.setSelectionRange(p,p)}(i=this.input.value.trim())&&!r.regex.test(i)?this.input.setCustomValidity(`Format invalide. ${r.description}`):this.input.setCustomValidity(""),this.isFormatting=!1,this.input.dispatchEvent(new CustomEvent("phone:validation",{bubbles:!0}))}),this.input.addEventListener("keypress",t=>{let e=String.fromCharCode(t.which);/[\d\s]/.test(e)||t.preventDefault()})}validatePhone(){if(!this.input||!this.iti)return!1;let t=this.iti.getSelectedCountryData(),e=t&&t.iso2?t.iso2:"fr",a=this.countryConfigs[e]||this.countryConfigs.fr,r=this.input.value.trim();return""!==r&&a.regex.test(r)}},this.init()}init(){this.formWrapper.attr("novalidate","novalidate"),this.formWrapper.find('[data-contact-field="error"]').hide(),this.formWrapper.find('[data-contact-field="validate"]').hide(),this.formWrapper.find('[data-contact-field="time-wrapper"]').hide(),this.bindEvents()}bindEvents(){this.formWrapper.on("click",t=>this.handleGlobalClick(t)),this.formWrapper.on("click touchstart",".form-contact_radio-wrapper",t=>this.handleRadioWrapperClick(t)),this.formWrapper.on("change",'input[type="radio"][data-contact-field="radio"]',t=>this.handleRadioChange(t)),this.formWrapper.on("focusin",'[data-contact-field="text"], [data-contact-field="phone"], [data-contact-field="postal"], [data-contact-field="date"]',t=>this.handleFocusIn(t)),this.formWrapper.on("focusout",'[data-contact-field="text"], [data-contact-field="phone"], [data-contact-field="postal"], [data-contact-field="date"]',t=>this.handleFocusOut(t)),this.formWrapper.on("input",'[data-contact-field="postal"]',t=>this.handlePostalInput(t)),this.formWrapper.on("input phone:validation",'[data-contact-field="phone"]',t=>this.handlePhoneValidationVisuals(t)),this.formWrapper.on("input change",'[data-contact-field="date"]',t=>this.handleDateInput(t)),this.formWrapper.on("input",'[data-contact-field="text"]:not([data-contact-field="phone"]):not([data-contact-field="postal"]):not([data-contact-field="date"])',t=>this.handleTextInput(t)),this.formWrapper.on("click",'input[type="submit"], button[type="submit"]',t=>this.handleSubmit(t)),$(document).on("click",'[data-form-contact="open"]',()=>this.handleReopen())}handleGlobalClick(t){$(t.target).closest('input[type="submit"], button[type="submit"]').length||this.removeAllErrorStyles()}removeAllErrorStyles(){this.formWrapper.find('[data-contact-field="text"], [data-contact-field="phone"], [data-contact-field="postal"], [data-contact-field="date"], [data-contact-field="radio-wrapper"]').each((t,e)=>{let a=e;$(e).is('[data-contact-field="date"]')&&(a=this.validator.getVisibleDateElement(e)),this.validator.cleanError(a)})}handleRadioWrapperClick(t){let e=$(t.currentTarget).find('input[type="radio"][data-contact-field="radio"]')[0];e&&"touchstart"===t.type&&(t.preventDefault(),e.checked=!0,$(e).trigger("change"))}handleRadioChange(t){let e=t.target.name,a=this.formWrapper.find(`input[type="radio"][data-contact-field="radio"][name="${e}"]`);if(a.each((t,e)=>{let a=$(e).closest('[data-contact-field="radio-wrapper"]')[0]||e;e.checked?(this.validator.cleanError(a),this.validator.getIcon(e,"error").hide(),this.validator.getIcon(e,"validate").show()):(a.style.setProperty("border","","important"),a.style.setProperty("box-shadow","","important"),this.validator.getIcon(e,"validate").hide())}),"contact-radio"===e){let r=this.formWrapper.find('[data-contact-field="time-wrapper"]'),i=this.formWrapper.find('[data-contact-field="date"]'),o=this.formWrapper.find("#radio-opt-2")[0];o&&o.checked?(r.slideDown(300),i.attr("required","required")):(r.slideUp(300),i.removeAttr("required"),i.each((t,e)=>{this.validator.hideSuccess(e),this.validator.cleanError(this.validator.getVisibleDateElement(e))}))}}handleFocusIn(t){let e=t.target;$(e).is('[data-contact-field="date"]')&&(e=this.validator.getVisibleDateElement(e)),this.validator.cleanError(e),this.validator.applySuccessShadow(e),$(e).is('[data-contact-field="phone"]')&&this.phoneIntl&&this.phoneIntl.validatePhone()&&this.validator.showSuccess(e,!0)}handleFocusOut(t){let e=t.target;$(e).is('[data-contact-field="date"]')&&(e=this.validator.getVisibleDateElement(e)),this.validator.removeShadow(e),$(e).is('[data-contact-field="phone"]')&&(this.phoneIntl&&this.phoneIntl.validatePhone()?this.validator.showSuccess(e,!1):this.validator.hideSuccess(e))}handlePostalInput(t){let e=t.target.value.replace(/\D/g,"");e.length>5&&(e=e.slice(0,5)),t.target.value=e,5===e.length?this.validator.showSuccess(t.target,document.activeElement===t.target):this.validator.hideSuccess(t.target)}handlePhoneValidationVisuals(t){let e=t.target,a=document.activeElement===e;setTimeout(()=>{this.phoneIntl&&this.phoneIntl.validatePhone()?this.validator.showSuccess(e,a):this.validator.hideSuccess(e)},10)}handleDateInput(t){""!==t.target.value.trim()?this.validator.showSuccess(t.target,document.activeElement===t.target):this.validator.hideSuccess(t.target)}handleTextInput(t){t.target.value.trim().length>1?this.validator.showSuccess(t.target,document.activeElement===t.target):this.validator.hideSuccess(t.target)}validateInputs(){let t=0;return this.formWrapper.find('[data-contact-field="text"], [data-contact-field="phone"], [data-contact-field="postal"], [data-contact-field="date"]').each((e,a)=>{if($(a).is('[data-contact-field="date"]')&&!$(a).attr("required"))return;let r=a,i=!0,o=a.value.trim();o||(i=!1),i&&$(a).is('[data-contact-field="postal"]')&&5!==o.length&&(i=!1),$(a).is('[data-contact-field="phone"]')&&(i=!!this.phoneIntl&&this.phoneIntl.validatePhone()),i?this.validator.showSuccess(r,!1):(this.validator.showError(r),t++)}),t}validateRadios(){let t=0,e=this.formWrapper.find('input[type="radio"][data-contact-field="radio"]:visible'),a={};for(let r in e.each((t,e)=>{let r=e.name;a[r]||(a[r]=[]),a[r].push(e)}),a){let i=a[r],o=i.some(t=>t.checked);o?i.forEach(t=>{let e=$(t).closest('[data-contact-field="radio-wrapper"]')[0]||t;this.validator.cleanError(e)}):(i.forEach(t=>{let e=$(t).closest('[data-contact-field="radio-wrapper"]')[0]||t;this.validator.showRadioError(e)}),t++)}return t}validateAllFields(){let t=0;return t+=this.validateInputs(),t+=this.validateRadios()}async submitToN8n(){let t=this.validateAllFields();if(t>0){console.log("⛔ Contact non envoy\xe9, erreurs de validation");return}$("body").css("overflow","");let e=this.form[0],a=new FormData(e);console.log("\uD83D\uDCE4 POST contact vers n8n");try{let r=await fetch("https://n8n.webary.fr/webhook/droneaxis",{method:"POST",body:a});console.log("✅ R\xe9ponse n8n (contact) status:",r.status),r.ok?this.handleSuccessfulSubmit():this.showErrorMessage()}catch(i){console.error("❌ Erreur n8n (contact):",i),this.showErrorMessage()}}handleSuccessfulSubmit(){this.hasSubmitted=!0,window.unlockScrollContact&&window.unlockScrollContact(),document.body.style.setProperty("overflow","visible","important"),document.querySelectorAll(".form-contact_form").forEach(t=>{t.style.setProperty("display","block","important")}),document.querySelectorAll(".form-contact_success").forEach(t=>{t.style.setProperty("display","none","important")}),document.querySelectorAll(".form-contact_error").forEach(t=>{t.style.setProperty("display","none","important")}),document.querySelectorAll('[data-form-contact="page"]').forEach(t=>{t.style.setProperty("display","none","important")});let t=this.form[0];t&&"function"==typeof t.reset&&t.reset(),this.formWrapper.find('[data-contact-field="time-wrapper"]').hide(),this.formWrapper.find('[data-contact-field="date"]').removeAttr("required"),this.removeAllErrorStyles(),this.formWrapper.find('[data-contact-field="validate"]').hide(),this.phoneIntl&&this.phoneIntl.input&&(this.phoneIntl.input.value="",this.phoneIntl.updateInputConfig()),this.popup.show()}showErrorMessage(){$(".form-contact_error").css("display","block"),$(".form-contact_success").hide()}handleSubmit(t){t.preventDefault(),t.stopPropagation(),this.submitToN8n()}handleReopen(){this.hasSubmitted&&($(".form-contact_success").hide(),$(".form-contact_error").hide(),$(".form-contact_form").css("display","block"))}}("#form-contact")}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.querySelector(".faq_tabs.w-tabs");if(!t)return;let e=t.querySelector(".w-tab-menu"),a=t.querySelector(".w-tab-content");if(!e||!a)return;let r=e.querySelectorAll(".w-tab-link, .faq_tab-link"),i=a.querySelectorAll(".w-tab-pane"),o=a.querySelectorAll(".faq_tab-pane .faq_tabs-menu-wrapper[data-tabs]");if(!r.length||!i.length||!o.length)return;function n(t,e){t&&t.style.setProperty("color",e,"important")}function s(t){t&&t.style.removeProperty("color")}function l(t,e){n(t,e);let a=t.querySelectorAll(".faq_tab-text");a.forEach(t=>n(t,e))}function c(t){s(t);let e=t.querySelectorAll(".faq_tab-text");e.forEach(t=>s(t))}function d(t){r.forEach(t=>{t.classList.remove("w--current"),t.setAttribute("aria-selected","false"),t.removeAttribute("tabindex"),c(t)}),i.forEach(t=>{t.classList.remove("w--tab-active"),t.setAttribute("hidden","true")}),o.forEach(t=>{t.querySelectorAll(".faq_tab-link").forEach(t=>{t.classList.remove("w--current"),c(t)})});let e=r[t],a=i[t];if(e&&(e.classList.add("w--current"),e.setAttribute("aria-selected","true"),e.setAttribute("tabindex","0"),l(e,"#ffffff")),a&&(a.classList.add("w--tab-active"),a.removeAttribute("hidden")),a){let n=a.querySelector(".faq_tabs-menu-wrapper[data-tabs]");if(n){let s=n.querySelectorAll(".faq_tab-link");s[t]&&(s[t].classList.add("w--current"),l(s[t],"#ffffff"))}}}let p=0;r.forEach((t,e)=>{(t.classList.contains("w--current")||"true"===t.getAttribute("aria-selected"))&&(p=e)}),d(p),r.forEach((t,e)=>{t.addEventListener("click",t=>{t.preventDefault(),d(e)})}),o.forEach(t=>{let e=t.querySelectorAll(".faq_tab-link");e.forEach((t,e)=>{t.addEventListener("click",t=>{t.preventDefault(),d(e)})})})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.querySelector('[data-form-contact="page"]'),e=document.querySelectorAll('[data-form-contact="open"]'),a=document.querySelectorAll('[data-form-contact="close"]'),r=document.querySelectorAll('[data-form-contact="page"] [data-btn]'),i=document.body;if(!t||!e.length)return;t.style.transition="opacity 400ms ease",t.style.opacity="0",t.style.display="none";let o=!1,n=t=>{o&&t.preventDefault()},s=t=>{if(!o)return;let e=["ArrowUp","ArrowDown","PageUp","PageDown","Home","End","Space"];(e.includes(t.code)||e.includes(t.key))&&t.preventDefault()},l=()=>{o=!0,i.addEventListener("wheel",n,{passive:!1}),i.addEventListener("touchmove",n,{passive:!1}),window.addEventListener("keydown",s,{passive:!1})},c=()=>{o=!1,i.removeEventListener("wheel",n),i.removeEventListener("touchmove",n),window.removeEventListener("keydown",s)};window.unlockScrollContact=c;let d=()=>{l(),t.style.display="block",requestAnimationFrame(()=>{t.style.opacity="1"})},p=()=>{t.style.opacity="0",setTimeout(()=>{t.style.display="none",c()},400)};document.addEventListener("click",e=>{if("block"!==t.style.display||e.target.closest(".flatpickr-calendar")||e.target.classList&&e.target.classList.contains("price_form-input")&&e.target.classList.contains("w-input"))return;let a=e.target.closest(".form-contact_component"),r=e.target.closest(".form-contact_content");if(a&&!r){p();return}let i=null!==e.target.closest('[data-form-contact="page"]');i||p()}),e.forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),d()})}),a.forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),p()})}),r.forEach(t=>{t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),p()})})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){gsap.registerPlugin(ScrollTrigger,SplitText),gsap.context(()=>{document.querySelectorAll('[data-heading=""]').forEach(t=>{if("true"===t.dataset.splitInit)return;t.dataset.splitInit="true";let e=t.querySelectorAll(".main-span");if(!t.textContent.trim())return;e.forEach(t=>{let e=t.previousSibling;e&&3===e.nodeType&&/\s$/.test(e.textContent)||t.insertAdjacentText("beforebegin"," ")});let a=t.querySelector("[data-split-word]"),r,i;if(!(i=a?Array.from(t.querySelectorAll('[data-split-word="true"]')):(r=new SplitText(t,{type:"words",wordsClass:"split-word-wrapper",elementClass:!1,ignore:".main-span",position:"relative"})).words.map(t=>{let e=window.getComputedStyle(t.parentNode);return t.dataset.splitWord="true",t.style.display="inline-block",t.style.lineHeight=e.lineHeight,t.style.textDecoration=e.textDecoration,t.style.fontSize=e.fontSize,t.style.fontWeight=e.fontWeight,t.style.color=e.color,t})).length)return;gsap.set(i,{filter:"blur(20px)",y:40,opacity:0,willChange:"filter, y, opacity"}),e.forEach(t=>{gsap.set(t,{filter:"blur(20px)",y:40,opacity:0,"--bgY":"100%"})});let o=new IntersectionObserver(a=>{a.forEach(a=>{if(a.isIntersecting){let r=gsap.timeline();r.to(i,{filter:"blur(0px)",y:0,opacity:1,duration:.9,stagger:.04,ease:"power3.out"}),e.forEach((t,e)=>{r.to(t,{filter:"blur(0px)",y:0,opacity:1,"--bgY":"0%",duration:.6,ease:"power3.out"},"-=0.8")}),o.unobserve(t)}})},{threshold:.3,rootMargin:"0px 0px -10% 0px"});o.observe(t)})})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){var t=document.querySelector('[data-navbar=""]'),e=document.querySelector('[data-hero=""]'),a=document.querySelector('[data-navbar-menu-btn=""]'),r=document.querySelector(".navbar_menu-button-inner"),i=t?t.querySelectorAll('[data-link-line="line"]'):[],o=a?a.getAttribute("aria-controls"):null,n=o?document.getElementById(o):null,s=!1;if(!t||!a)return;var l=t.hasAttribute("data-navbar-legal");let c=!1,d=t=>{c&&t.preventDefault()},p=t=>{if(!c)return;let e=["ArrowUp","ArrowDown","PageUp","PageDown","Home","End","Space"];(e.includes(t.code)||e.includes(t.key))&&t.preventDefault()};function h(t){i.forEach(function(e){e.style.backgroundColor=t})}function u(t){t?document.body.style.overflowX="hidden":document.body.style.overflowX=""}function f(){l&&(t.style.backgroundColor="rgba(255, 255, 255, 0.5)",t.style.backdropFilter="blur(10px)",t.style.webkitBackdropFilter="blur(10px)",t.style.color="var(--_variables-collection---text-color--text-primary)",h("#0a0a0a"))}function m(){if(l){f();return}if(!s){var a=window.scrollY,r=window.innerWidth<768;if(!e){a>0?(t.style.backgroundColor="rgba(255, 255, 255, 0.5)",t.style.backdropFilter="blur(10px)",t.style.webkitBackdropFilter="blur(10px)",t.style.color=r?"black":"var(--_variables-collection---text-color--text-primary)",h("#0a0a0a")):g();return}var i,o=a,n=t.getBoundingClientRect(),c=e.getBoundingClientRect();n.bottom+o>c.bottom+o?(t.style.backgroundColor="rgba(255, 255, 255, 0.5)",t.style.backdropFilter="blur(10px)",t.style.webkitBackdropFilter="blur(10px)",t.style.color=r?"black":"var(--_variables-collection---text-color--text-primary)",h("#0a0a0a")):a>0?(t.style.backgroundColor="rgba(0, 0, 0, 0.25)",t.style.backdropFilter="blur(10px)",t.style.webkitBackdropFilter="blur(10px)",t.style.color="",h("")):g()}}function g(){if(l){f();return}t.style.backgroundColor="transparent",t.style.backdropFilter="none",t.style.webkitBackdropFilter="none",t.style.color="",h("")}function y(){s=!0,t.style.backgroundColor="#F2F2F2",t.style.backdropFilter="none",t.style.webkitBackdropFilter="none",t.style.color="black",r&&(r.style.color="black"),h("#0a0a0a"),u(!0),c=!0,window.addEventListener("wheel",d,{passive:!1}),window.addEventListener("touchmove",d,{passive:!1}),window.addEventListener("keydown",p,{passive:!1})}function b(){s=!1,r&&(r.style.color=""),u(!1),c=!1,window.removeEventListener("wheel",d),window.removeEventListener("touchmove",d),window.removeEventListener("keydown",p),l?f():m()}if(a&&n){var v=new MutationObserver(function(){a.classList.contains("w--open")?y():b()}),w=new MutationObserver(function(t){t.forEach(function(t){"style"===t.attributeName&&"none"===n.style.display&&b()})});v.observe(a,{attributes:!0,attributeFilter:["class"]}),w.observe(n,{attributes:!0,attributeFilter:["style"]}),a.classList.contains("w--open")?y():l&&f()}window.addEventListener("scroll",m),window.addEventListener("resize",m),m()}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t={"slider-1":{priceTier1:8.9,priceTier2:6.9,tierLimit:100,minValue:0},"slider-2":{pricePerM2:6.9,minValue:0,snapTo:25,snapThreshold:8},"slider-3":{pricePerM2:9.9,minValue:0,snapTo:25,snapThreshold:8},"slider-4":{pricePerM2:3.9,minValue:0,snapTo:25,snapThreshold:8}};function e(){let e=document.querySelector('input[data-range="slider-1"]'),o=e&&parseFloat(e.value)||0;r("value_toiture",o);let n=document.querySelector('input[data-radio="slops"]:checked');if(n){let s="";switch(n.value){case"pente_faible":s="Faible";break;case"pente_moyenne":s="Moyenne";break;case"pente_forte":s="Forte";break;default:s=""}document.querySelectorAll('[data-radio="text"]').forEach(t=>t.textContent=s)}let l=function t(){let e=document.querySelector('input[data-radio="slops"]:checked');if(!e)return 1;switch(e.value){case"pente_faible":return 1.155;case"pente_moyenne":return 1.414;case"pente_forte":return 2;default:return 1}}(),c=o*l;document.querySelectorAll('[data-radio="coef"]').forEach(t=>t.textContent=l.toFixed(3));let d=c.toFixed(1).replace(".",",");document.querySelectorAll('[data-radio="slops-text"]').forEach(t=>t.textContent=d);let p=function e(a){let r=t["slider-1"],i=r.tierLimit;if(a<=i)return a*r.priceTier1;{let o=i*r.priceTier1,n=(a-i)*r.priceTier2;return o+n}}(c);function h(e,o,n){let s=document.querySelector(`input[data-range="${e}"]`);if(s){let l=parseFloat(s.value)||0,c=function e(a,r){let i=t[a];if(!i||!i.snapTo||!i.snapThreshold)return r;let o=i.snapTo,n=i.snapThreshold,s=Math.round(r/o)*o;return Math.abs(r-s)<=n?s:r}(e,l);c!==l&&(s.value=c);let d=function e(a,r){let i=t[a];if(!i||!i.pricePerM2||0===r)return 0;let o=Math.max(i.minValue,r);return o*i.pricePerM2}(e,c);return r(o,c),r(n,a(d)),i(s,d),d}return 0}e&&i(e,p),r("value_toiture_result",a(p));let u=h("slider-2","value_facades_demoussage","value_surface_demoussage"),f=h("slider-3","value_facades_hydrofuge","value_surface_protection_hydrofuge"),m=h("slider-4","value_gouttieres","value_gouttieres_result");r("value_facades_result",a(u+f));let g=!function t(){let e=document.querySelector('input[data-toggle="checkbox"]');return!!e&&e.checked}()?0:150,y=Math.max(0,p+u+f+m-g);document.querySelectorAll('[data-range="sum_ht"]').forEach(t=>t.textContent=a(y));let b=1.2*y;document.querySelectorAll('[data-range="sum"]').forEach(t=>t.textContent=a(b))}function a(t){return t.toFixed(2).replace(".",",")}function r(t,e){document.querySelectorAll(`[data-range="${t}"]`).forEach(t=>{("INPUT"!==t.tagName||"range"!==t.type)&&("INPUT"===t.tagName?t.value=e:t.textContent=e)})}function i(t,e){let r=t.closest('[data-range="wrapper"]');if(r){let i=r.querySelector('[data-range="price"]');i&&(i.textContent=a(e))}}let o=document.querySelectorAll(".price_form-text-wrapper[data-radio]");function n(t){let a=t.querySelector('input[type="radio"][data-radio="slops"]');a&&(a.checked||(a.checked=!0,a.dispatchEvent(new Event("change",{bubbles:!0}))),e())}o.forEach(t=>{let e=0,a=0,r=!1;t.addEventListener("touchstart",t=>{t.touches.length>1||(e=t.touches[0].clientX,a=t.touches[0].clientY,r=!1)},{passive:!0}),t.addEventListener("touchmove",t=>{let i=Math.abs(t.touches[0].clientX-e),o=Math.abs(t.touches[0].clientY-a);(i>10||o>10)&&(r=!0)},{passive:!0}),t.addEventListener("touchend",()=>{r||n(t)}),t.addEventListener("click",()=>n(t))});let s=document.querySelectorAll('input[type="range"]');s.forEach(t=>{t.addEventListener("input",e),t.addEventListener("change",e)});let l=document.querySelectorAll('input[data-radio="slops"]');l.forEach(t=>t.addEventListener("change",e));let c=document.querySelector('input[data-toggle="checkbox"]');c&&c.addEventListener("change",e),e(),setTimeout(()=>e(),50),setTimeout(()=>e(),200)}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){class t{constructor(){this.iti=null,this.input=null,this.isFormatting=!1,this.countryConfigs={fr:{placeholder:"07 12 34 56 78",regex:/^0[1-9](?:\s\d{2}){4}$/,maxLength:14,formatPattern:[2,2,2,2,2],description:"Format : 0X XX XX XX XX"},be:{placeholder:"04 76 64 64 64",regex:/^0[1-9](?:\s\d{2}){4}$/,maxLength:14,formatPattern:[2,2,2,2,2],description:"Format : 0X XX XX XX XX"},ch:{placeholder:"075 555 55 55",regex:/^0\d{2}\s\d{3}\s\d{2}\s\d{2}$/,maxLength:13,formatPattern:[3,3,2,2],description:"Format : 0XX XXX XX XX"},de:{placeholder:"0171 123 4567",regex:/^0\d{3,4}\s\d{3}\s\d{4}$/,maxLength:14,formatPattern:[4,3,4],description:"Format : 0XXX XXX XXXX"}},this.init()}init(){this.input=document.querySelector("input[data-phone]"),this.input&&window.intlTelInput&&(this.iti=window.intlTelInput(this.input,{utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js",initialCountry:"fr",preferredCountries:["fr"],onlyCountries:["fr","be","ch","de"],nationalMode:!0,formatOnDisplay:!0,separateDialCode:!1}),this.setupEventListeners(),setTimeout(()=>this.updateInputConfig(),200))}formatPhoneNumber(t,e){let a=t.replace(/\s/g,""),r=e.formatPattern.reduce((t,e)=>t+e,0),i=a.substring(0,r),o="",n=0;for(let s=0;s<e.formatPattern.length;s++){let l=e.formatPattern[s],c=i.substring(n,n+l);if(c.length>0){o+=c;let d=i.substring(n+l);s<e.formatPattern.length-1&&c.length===l&&d.length>0&&(o+=" ")}n+=l}return o}updateInputConfig(){let t=this.iti.getSelectedCountryData(),e=t&&t.iso2?t.iso2:"fr",a=this.countryConfigs[e]||this.countryConfigs.fr;this.input.placeholder=a.placeholder,this.input.setAttribute("data-phone",e),this.input.setAttribute("maxlength",a.maxLength)}setupEventListeners(){this.input.addEventListener("countrychange",()=>{this.input.value="",this.input.setCustomValidity(""),this.updateInputConfig(),i.cleanErrorStyle(this.input),i.hideSuccess(this.input)}),this.input.addEventListener("input",t=>{if(this.isFormatting)return;this.isFormatting=!0;let e=this.iti.getSelectedCountryData(),a=e&&e.iso2?e.iso2:"fr",r=this.countryConfigs[a]||this.countryConfigs.fr,i=this.input.value,o=this.input.selectionStart,n=i.replace(/[^\d\s]/g,""),s=n.replace(/\s/g,"");s.length>0&&/^[1-9]/.test(s)&&"ch"!==a&&(n="0"+s),"ch"===a&&s.length>0&&/^[78]/.test(s)&&(n="0"+s);let l=this.formatPhoneNumber(n,r);if(l!==i){let c=i.length,d=l.length;this.input.value=l;let p=o;p=Math.max(0,Math.min(p=d>c&&" "===l[o]?o+1:d<c&&o>0&&" "===i[o-1]?o-1:o+(d-c),l.length)),this.input.setSelectionRange(p,p)}(i=this.input.value.trim())&&!r.regex.test(i)?this.input.setCustomValidity(`Format invalide. ${r.description}`):this.input.setCustomValidity(""),this.isFormatting=!1}),this.input.addEventListener("keypress",t=>{let e=String.fromCharCode(t.which);/[\d\s]/.test(e)||t.preventDefault()})}validatePhone(){let t=this.iti.getSelectedCountryData(),e=t&&t.iso2?t.iso2:"fr",a=this.countryConfigs[e]||this.countryConfigs.fr,r=this.input.value.trim();return r&&a.regex.test(r)}}class e{static BORDER_ERROR="1px solid #ff0000";static SHADOW_ERROR="0 0 0 2px rgba(255, 0, 0, 0.1)";static BORDER_SUCCESS="1px solid #008000";static SHADOW_SUCCESS="0 0 0 2px rgba(0, 128, 0, 0.1)";static EMAIL_REGEX=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;static PRICE_FIELDS=["prix_surface_nettoyage_toiture","prix_surface_demoussage","prix_surface_protection_hydrofuge","prix_voulume_nettoyage_gouttieres"]}class a{constructor(){this.prixTTCInput=$('input[name="prix_ttc"][data-range="sum"]')}updatePrixTTC(){if(0===this.prixTTCInput.length)return;let t=0;e.PRICE_FIELDS.forEach(e=>{let a=$('input[name="'+e+'"]');if(a.length>0){let r=a.val().trim(),i=r.replace(/[€\s]/g,"").replace(",","."),o=parseFloat(i)||0;t+=o}});let a=t.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})+"€";this.prixTTCInput.val(a).attr("value",a),console.log("\uD83D\uDCB0 Prix TTC mis \xe0 jour:",a)}}class r{static getRelatedIcon(t,e){let a=$(t).closest(".price_form-input-wrapper");if(a.length>0)return a.find('[data-field="'+e+'"]');{let r=$(t).siblings('[data-field="'+e+'"]');return r.length?r:$(t).parent().find('[data-field="'+e+'"]')}}}class i{static cleanErrorStyle(t){("rgb(255, 0, 0)"===t.style.borderColor||"#ff0000"===t.style.borderColor)&&(t.style.border="",t.style.boxShadow="",r.getRelatedIcon(t,"error").hide())}static showSuccess(t,a=!1){this.cleanErrorStyle(t),t.style.border=e.BORDER_SUCCESS,a?t.style.boxShadow=e.SHADOW_SUCCESS:t.style.boxShadow="",r.getRelatedIcon(t,"validate").show()}static showError(t,a=!1){this.cleanErrorStyle(t),t.style.border=e.BORDER_ERROR,a?t.style.boxShadow=e.SHADOW_ERROR:t.style.boxShadow="",r.getRelatedIcon(t,"error").show()}static hideSuccess(t){("rgb(0, 128, 0)"===t.style.borderColor||"#008000"===t.style.borderColor)&&(t.style.border="",t.style.boxShadow=""),r.getRelatedIcon(t,"validate").hide()}static removeAllErrorStyles(){$('[data-field="input"]').each(function(){i.cleanErrorStyle(this)}),$("[data-radio]").each(function(){i.cleanErrorStyle(this)})}}class o{static phoneInternational=null;static setPhoneInternational(t){this.phoneInternational=t}static validateInput(t){let a=$(t),r=t.value.trim(),i=!0;return r?a.is("[data-postal]")&&5!==r.length?i=!1:a.is("[data-phone]")?i=!!this.phoneInternational&&this.phoneInternational.validatePhone():(a.is("[data-mail]")||"email"===t.type)&&!e.EMAIL_REGEX.test(r)&&(i=!1):i=!1,a.is('[data-range="sum"]')&&(i=!0),i}static validateRadioGroups(t){let a=$("[data-radio]:visible",t),o={},n=0;for(let s in a.each(function(){let t=$(this).find('input[type="radio"]')[0];t&&(o[t.name]||(o[t.name]=[]),o[t.name].push(this))}),o){let l=$('input[name="'+s+'"]:checked',t).length>0,c=o[s];l?c.forEach(t=>{i.cleanErrorStyle(t)}):(c.forEach(t=>{t.style.border=e.BORDER_ERROR,t.style.boxShadow=e.SHADOW_ERROR,r.getRelatedIcon(t,"error").show()}),n++)}return n}static validateVisibleFields(){let t=0;return $('[data-field="input"]:visible:not([data-range="sum"]):not([type="range"])').each(function(){let e=o.validateInput(this);e?(i.cleanErrorStyle(this),i.showSuccess(this,!1)):(i.hideSuccess(this),i.showError(this,!1),t++)}),t+=o.validateRadioGroups(document)}static validateContactFields(t){let e=0;return $('[data-field="input"]:visible',t).each(function(){let t=o.validateInput(this);t?(i.cleanErrorStyle(this),i.showSuccess(this,!1)):(i.hideSuccess(this),i.showError(this,!1),e++)}),e+=o.validateRadioGroups(t)}}class n{static formatPostal(t){let e=t.target.value.replace(/\D/g,"");e.length>5&&(e=e.slice(0,5)),t.target.value=e,5===e.length?i.showSuccess(t.target,!1):i.hideSuccess(t.target)}static formatEmail(t){e.EMAIL_REGEX.test(t.target.value)?i.showSuccess(t.target,!1):i.hideSuccess(t.target)}static formatGeneric(t){t.value.trim().length>1?i.showSuccess(t,!1):i.hideSuccess(t)}}class s{constructor(t){this.priceCalculator=t,this.setupEventListeners()}setupEventListeners(){$(document).on("click touchstart","[data-radio]",this.handleClick.bind(this)),$(document).on("change",'input[type="radio"]',this.handleChange.bind(this))}handleClick(t){let e=$(t.currentTarget).find('input[type="radio"]')[0];e&&"touchstart"===t.type&&(t.preventDefault(),e.checked=!0,$(e).trigger("change"))}handleChange(t){let e=t.target.name,a=$("[data-radio]").filter(function(){let t=$(this).find('input[type="radio"]')[0];return t&&t.name===e});a.each(function(){let t=$(this).find('input[type="radio"]')[0];t&&(t.checked?(i.cleanErrorStyle(this),i.showSuccess(this,!1)):(("rgb(0, 128, 0)"===this.style.borderColor||"#008000"===this.style.borderColor)&&(this.style.border="",this.style.boxShadow=""),r.getRelatedIcon(this,"validate").hide()))}),this.priceCalculator.updatePrixTTC()}}class l{constructor(t,e){this.priceCalculator=t,this.phoneInternational=e,this.setupEventListeners()}setupEventListeners(){$(document).on("focusin",'[data-field="input"]:not([data-range="sum"]):not([data-phone])',this.handleFocusIn.bind(this)),$(document).on("focusout",'[data-field="input"]',this.handleFocusOut.bind(this)),$(document).on("input","[data-postal]",n.formatPostal),$(document).on("input","[data-mail]",n.formatEmail),$(document).on("input change",'input[name^="prix_"]:not([name="prix_ttc"])',this.handlePriceChange.bind(this)),$(document).on("input",'[data-field="input"]:not([data-postal]):not([data-phone]):not([data-mail]):not([data-range="sum"])',this.handleGenericInput.bind(this)),$(document).on("input","[data-phone]",t=>{this.phoneInternational&&this.phoneInternational.validatePhone()?i.showSuccess(t.target,!1):i.hideSuccess(t.target)}),$(document).on("focusin","[data-phone]",t=>{this.phoneInternational&&this.phoneInternational.validatePhone()&&i.showSuccess(t.target,!0)})}handleFocusIn(t){let a=t.target.value.trim(),r=!0;a?$(t.target).is("[data-postal]")&&5!==a.length?r=!1:$(t.target).is("[data-mail]")&&!e.EMAIL_REGEX.test(a)?r=!1:a.length<=1&&(r=!1):r=!1,r&&i.showSuccess(t.target,!0)}handleFocusOut(t){"rgb(0, 128, 0)"===t.target.style.borderColor||"#008000"===t.target.style.borderColor?t.target.style.boxShadow="":("rgb(255, 0, 0)"===t.target.style.borderColor||"#ff0000"===t.target.style.borderColor)&&(t.target.style.boxShadow="")}handlePriceChange(){this.priceCalculator.updatePrixTTC()}handleGenericInput(t){n.formatGeneric(t.target)}}class c{constructor(){this.step1=$('[data-form-steps="1"]'),this.step2=$('[data-form-steps="2"]'),this.setupEventListeners()}setupEventListeners(){$('[data-btn="form"]').click(this.handleNextStep.bind(this)),$('[data-form="return"]').click(this.handlePreviousStep.bind(this)),$(document).on("click",this.handleDocumentClick.bind(this))}handleNextStep(t){if(t.preventDefault(),t.stopPropagation(),this.step1.is(":visible")){let e=o.validateVisibleFields();0===e&&this.step1.animate({opacity:0},300,()=>{this.step1.hide(),this.step2.css({display:"grid",opacity:"0"}),this.step2.animate({opacity:1},300),767>$(window).width()&&$("html, body").animate({scrollTop:$("#etape-2").offset().top},500)})}}handlePreviousStep(t){t.preventDefault(),t.stopPropagation(),this.step2.animate({opacity:0},300,()=>{this.step2.hide(),this.step1.css({display:"grid",opacity:"0"}),this.step1.animate({opacity:1},300)})}handleDocumentClick(t){$(t.target).closest('[data-btn="form"], input[type="submit"], button[type="submit"]').length||i.removeAllErrorStyles()}}class d{constructor(t){this.priceCalculator=t,this.formContact=$("[data-form-content]"),this.formContactWrapper=this.formContact.closest(".w-form"),this.hasContactSubmitted=!1,this.setupEventListeners()}setupEventListeners(){this.formContactWrapper.on("click",'input[type="submit"], button[type="submit"]',this.handleSubmit.bind(this))}handleSubmit(t){t.preventDefault(),t.stopPropagation(),this.postToN8n()}postToN8n(){this.priceCalculator.updatePrixTTC();let t=o.validateContactFields(this.formContact);if(t>0){console.log("⛔ Contact non envoy\xe9, erreurs de validation");return}$("body").css("overflow","");let e=this.formContact[0],a=new FormData(e);console.log("\uD83D\uDCE4 POST contact vers n8n"),fetch("https://n8n.webary.fr/webhook/droneaxis",{method:"POST",body:a}).then(t=>{console.log("✅ R\xe9ponse n8n (contact) status:",t.status),t.ok?(this.hasContactSubmitted=!0,this.formContact.hide(),$("[data-form-success]").css("display","block"),$("[data-form-error]").hide(),768>$(window).width()&&$("html, body").animate({scrollTop:$("[data-form-success]").offset().top-200},500)):($("[data-form-error]").css("display","block"),$("[data-form-success]").hide())}).catch(t=>{console.error("❌ Erreur n8n (contact):",t),$("[data-form-error]").css("display","block"),$("[data-form-success]").hide()})}}new class e{constructor(){this.init()}init(){this.setupForm(),this.priceCalculator=new a,this.phoneInternational=new t,o.setPhoneInternational(this.phoneInternational),this.radioHandler=new s(this.priceCalculator),this.inputHandler=new l(this.priceCalculator,this.phoneInternational),this.formNavigation=new c,this.formSubmission=new d(this.priceCalculator),this.priceCalculator.updatePrixTTC()}setupForm(){let t=$("form"),e=$('[data-form-steps="1"]'),a=$('[data-form-steps="2"]');t.attr("novalidate","novalidate"),e.css("display","grid"),a.hide(),$('[data-field="error"]').hide(),$('[data-field="validate"]').hide()}}}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.querySelectorAll(".price_range-wrapper");t.forEach((t,e)=>{let a=t.querySelector('input[type="range"]'),r=t.querySelector('[data-range="text"]');function i(){let t=parseFloat(a.value),e=parseFloat(a.min||0),i=parseFloat(a.max||100),o=(t-e)/(i-e)*100;a.style.background=`linear-gradient(to right, #192BC2 ${o}%, #DFDFDF ${o}%)`,r&&(r.style.left=`calc(${o}% + ${10-.2*o}px)`)}a&&(a.addEventListener("input",i),window.addEventListener("resize",i),i())})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.querySelector("form");if(!t)return;let e=t.querySelector('input[name="action"]');e||((e=document.createElement("input")).type="hidden",e.name="action",t.appendChild(e));let a=t.querySelectorAll('input[type="submit"][data-action]');a.forEach(t=>{t.addEventListener("click",function(){e.value=this.dataset.action||"",console.log("\uD83D\uDDB1️ CLICK submit (actions.js) → action =",e.value)})});let r=document.querySelectorAll(".price_btn-wrapper");r.forEach(t=>{let e=t.querySelector("a.btn_component.is-form"),a=t.querySelector('input[type="submit"][data-action]');e&&a&&e.addEventListener("click",function(t){t.preventDefault(),console.log("\uD83D\uDDB1️ CLICK fakeBtn → click sur realSubmit",a),a.click()})})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){let t=document.querySelectorAll('[data-toggle="checkbox"]'),e=document.querySelector('[span][data-toggle="text"], [data-toggle="text"]');t.forEach(t=>{let a=t.closest(".price_checkbox-wrapper");if(!a)return;a.style.webkitTapHighlightColor="transparent";let r=a.querySelector('[data-toggle="circle"]'),i=a.querySelector('[data-toggle="background"]');function o(){let a=t.checked;e&&(e.textContent=a?"OUI":"NON"),a?(r.style.transform="translate(100%, -50%)",r.style.backgroundColor="#FFFFFF",i.style.backgroundColor="#192BC2"):(r.style.transform="translate(0%, -50%)",r.style.backgroundColor="#192BC2",i.style.backgroundColor="#FFFFFF")}r&&i&&(r.style.transition="transform 0.35s ease, background-color 0.35s ease",i.style.transition="background-color 0.35s ease",o(),t.addEventListener("change",o))})}),window.Webflow=window.Webflow||[],window.Webflow.push(function(){setTimeout(()=>{let t=document.querySelectorAll(".price_form-text-wrapper"),e=[];t.forEach(t=>{if(!t.hasAttribute("data-radio")){let a=t.querySelector('input[type="radio"]');a&&e.push(a)}}),e.forEach(t=>{t.addEventListener("change",function(){if(this.checked){let t=this.name,e=document.querySelectorAll(`input[name="${t}"]`);e.forEach(t=>{let e=t.closest(".price_form-text-wrapper");if(e&&!e.hasAttribute("data-radio")){e.style.backgroundColor="#ffffff",e.style.borderColor="transparent",e.style.color="#333333";let a=e.querySelectorAll("*");a.forEach(t=>t.style.color="")}});let a=this.closest(".price_form-text-wrapper");if(a){a.style.backgroundColor="rgba(25, 43, 194, 0.1)",a.style.borderColor="#192BC2",a.style.color="#192BC2";let r=a.querySelectorAll("*");r.forEach(t=>{t.style.color="#192BC2"})}}})})},100)}),function(){let t=document.querySelectorAll('input[type="range"]');if(0===t.length)return;let e=[];t.forEach(t=>{let a=function t(e){if(e.parentNode.classList.contains("ios-slider-wrapper"))return;let a=document.createElement("div");a.className="ios-slider-wrapper";let r=document.createElement("div");r.className="ios-slider-thumb",e.parentNode.insertBefore(a,e),a.appendChild(e),a.appendChild(r);let i=parseFloat(e.min)||0,o=parseFloat(e.max)||100;function n(){let t=parseFloat(e.value),a=e.getBoundingClientRect();if(0===a.width)return;let n=a.width-30;r.style.left=15+(t-i)/(o-i)*n+"px"}return r.addEventListener("touchstart",function(t){"none"!==getComputedStyle(r).display&&t.preventDefault()},{passive:!1}),r.addEventListener("touchmove",function(t){if("none"===getComputedStyle(r).display)return;t.preventDefault();let a=e.getBoundingClientRect(),s=t.touches[0].clientX,l=s-a.left,c=l/a.width;c<0&&(c=0),c>1&&(c=1);let d=i+c*(o-i);e.value=Math.round(d),n(),e.dispatchEvent(new Event("input")),e.dispatchEvent(new Event("change"))},{passive:!1}),e.addEventListener("input",n),requestAnimationFrame(n),n}(t);a&&e.push(a)}),window.addEventListener("resize",()=>{e.forEach(t=>t())}),window.addEventListener("load",()=>{e.forEach(t=>t())})}();